

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3 Story Building: Sensitivity Analysis &mdash; Wind Engineering with Uncertainty Quantification  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../_static/doctools.js"></script>
        <script src="../../../../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="../../../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../../../index.html">



  
  <img src="../../../../../../_static/WE-UQ-Logo-grey3.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../front-matter/ack.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../front-matter/license.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../front-matter/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../front-matter/abbreviations.html">Abbreviations</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../about/WEUQ/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/desktop/installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../usage/desktop/usage.html">3. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/desktop/troubleshooting.html">4. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">5. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../requirements/WEUQ.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bugs.html">7. Bugs &amp; Feature Requests</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../technical_manual/desktop/technical_manual.html">1. Technical Manual</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/architecture/desktop/architecture.html">2. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/how_to_extend/desktop/how_to_extend.html">3. How to Extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/verification/desktop/verification.html">4. Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/coding_style/desktop/coding_style.html">5. Coding Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_manual/examples/desktop/examples.html">6. Examples</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">Wind Engineering with Uncertainty Quantification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>3 Story Building: Sensitivity Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../../_sources/common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="story-building-sensitivity-analysis">
<h1>3 Story Building: Sensitivity Analysis<a class="headerlink" href="#story-building-sensitivity-analysis" title="Permalink to this headline">¶</a></h1>
<p>Consider the problem of uncertainty quantification in a three story steel building. The building being modelled is the 3 story Boston building presented in the FEMA-355C report. From the description in Appendix B of the FEMA document the building is a rectangular building <strong>120</strong> ft by <strong>180</strong> ft with a height above ground of <strong>39</strong> ft. The building weight is approx. <strong>6,500</strong> kips. Eigenvalues are shown in Table 5.1. of the FEMA document to be between <strong>1.6</strong> sec and <strong>1.9</strong> sec depending on connection detals. For this example (and for demonstrative purposes only), this building will be modelled as a shear building with <strong>10</strong> nodes and <strong>9</strong> elements, as shown in following figure. For loading, the TPU Low Rise Wind Generation tool will be used with the mean wind speed being treated as a random variable with a normal distribution described by a mean <span class="math notranslate nohighlight">\(\mu_{gustWS}=20 \mathrm{mph}\)</span> and standard deviation <span class="math notranslate nohighlight">\(\sigma_{gustWS} =3 \mathrm{mph}\)</span>.</p>
<div class="align-center figure" id="id2">
<a class="reference internal image-reference" href="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story.png"><img alt="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story.png" src="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-text">Three Story Downtown Boston Building from FEMA-355C</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The structure has uncertain properties that all follow normal distribution:</p>
<ol class="arabic simple">
<li><p>Weight of Building(bldgW): mean <span class="math notranslate nohighlight">\(\mu_{bldgW}=6500 \mathrm{kip}\)</span> and standard deviation <span class="math notranslate nohighlight">\(\sigma_{bldgW} =400 \mathrm{kip}\)</span> (COV = 6%)</p></li>
<li><p>Story Stiffness(storyK): mean <span class="math notranslate nohighlight">\(\mu_{storyK}=1600 \mathrm{kip/in}\)</span> and standard deviation <span class="math notranslate nohighlight">\(\sigma_{storyK} =160 \mathrm{kip/in}\)</span> (COV = 10%)</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>For the mean values provided the natural period of the structure is <strong>1.7</strong> sec.</p></li>
<li><p>The choice of COV percentages is for demonstrative purposes only.</p></li>
</ol>
</div>
<p>The exercise will use the OpenSees, <a class="reference internal" href="../../../../usage/desktop/SIM.html#lblopenseessim"><span class="std std-numref">Section 3.3.2</span></a>, structural generators. For the OpenSees generator the following model script, <a class="reference external" href="https://github.com/NHERI-SimCenter/SimCenterDocumentation/tree/master/docs/common/user_manual/examples/desktop/WEUQ/weuq-01/src/Frame3Model.tcl">Frame3Model.tcl</a>:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c">#units kip, in</span>

<span class="nv">pset</span> storyK  <span class="mf">400.0</span>
<span class="nv">pset</span> bldgW  <span class="mf">6485.0</span>

<span class="k">set</span> g <span class="mf">386.1</span><span class="k">;</span>  
<span class="k">set</span> b <span class="mi">1440</span>.
<span class="k">set</span> d <span class="mi">2160</span>.
<span class="k">set</span> h <span class="mi">468</span>.
<span class="k">set</span> numStory <span class="mi">3</span>

<span class="k">set</span> fW <span class="k">[expr</span> <span class="nv">$bldgW</span><span class="o">/</span><span class="k">(</span><span class="nv">1.</span><span class="o">*</span><span class="nv">$numStory</span><span class="k">)];</span> <span class="c"># floor Weight</span>
<span class="k">set</span> fM <span class="k">[expr</span> <span class="nv">$fW</span><span class="o">/</span><span class="nv">$g</span><span class="k">]</span>
<span class="k">set</span> sH <span class="k">[expr</span> <span class="nv">$h</span><span class="o">/</span><span class="k">(</span><span class="nv">1.</span><span class="o">*</span><span class="nv">$numStory</span><span class="k">)];</span>  <span class="c"># story Height</span>
<span class="k">set</span> sM <span class="mf">1.0</span>e-3

<span class="nv">model</span> Basic <span class="o">-</span>ndm <span class="mi">3</span> <span class="o">-</span>ndf <span class="mi">6</span>
<span class="nv">node</span> <span class="mi">1</span> <span class="mi">0</span>. <span class="mi">0</span>. <span class="mi">0</span>.
<span class="nv">fix</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="k">set</span> E <span class="mi">29000</span>.
<span class="k">set</span> A <span class="mi">1</span>e4
<span class="k">set</span> I <span class="k">[expr</span> <span class="nv">$storyK</span> <span class="o">*</span> <span class="nv">$sH</span> <span class="o">*</span> <span class="nv">$sH</span> <span class="o">*</span> <span class="nv">$sH</span> <span class="o">/</span> <span class="k">(</span><span class="nv">12.</span><span class="o">*</span><span class="nv">$E</span><span class="k">)]</span>
<span class="nv">geomTransf</span> Linear <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="k">set</span> G <span class="mi">1</span>e4
<span class="k">set</span> J <span class="mi">1</span>e8

<span class="k">for</span> <span class="k">{set</span> i <span class="mi">1</span><span class="k">;</span> <span class="k">set</span> j <span class="mi">2</span><span class="k">}</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$numStory</span><span class="k">}</span> <span class="k">{</span><span class="nb">incr</span> i <span class="mi">1</span><span class="k">;</span> <span class="nb">incr</span> j <span class="mi">1</span><span class="k">}</span> <span class="k">{</span>
    <span class="nv">node</span> <span class="nv">$j</span> <span class="mi">0</span>. <span class="mi">0</span>. <span class="k">[expr</span> <span class="nv">$i</span><span class="o">*</span><span class="nv">$sH</span><span class="k">]</span> <span class="o">-</span>mass <span class="nv">$fM</span> <span class="nv">$fM</span> <span class="nv">$fM</span> <span class="nv">$sM</span> <span class="nv">$sM</span> <span class="nv">$sM</span>
    <span class="nv">fix</span> <span class="nv">$j</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
    <span class="nv">element</span> elasticBeamColumn <span class="nv">$i</span> <span class="nv">$i</span> <span class="nv">$j</span> <span class="nv">$A</span> <span class="nv">$E</span> <span class="nv">$G</span> <span class="nv">$J</span> <span class="nv">$I</span> <span class="nv">$I</span> <span class="mi">1</span>
<span class="k">}</span>
<span class="k">set</span> numEigen <span class="mi">3</span>
<span class="k">set</span> lambda <span class="k">[</span><span class="nv">eigen</span> <span class="nv">$numEigen</span><span class="k">]</span>

<span class="k">for</span> <span class="k">{set</span> i <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$numEigen</span><span class="k">}</span> <span class="k">{</span><span class="nb">incr</span> i <span class="mi">1</span><span class="k">}</span> <span class="k">{</span>
    <span class="k">set</span> omega <span class="k">[expr</span> sqrt<span class="k">([</span><span class="nb">lindex</span> <span class="nv">$lambda</span> <span class="nv">$i</span><span class="k">])]</span>
    <span class="k">set</span> T <span class="k">[expr</span> <span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="nv">$omega</span><span class="k">]</span>
    <span class="nb">puts</span> <span class="s2">&quot;$i $T [expr 1/$T]&quot;</span>
<span class="k">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>The first lines containing <code class="docutils literal notranslate"><span class="pre">pset</span></code> will be read by the application when the file is selected and the application will autopopulate the Random Variables <code class="docutils literal notranslate"><span class="pre">w</span></code> and <code class="docutils literal notranslate"><span class="pre">k</span></code> in the <strong>RV</strong> tab with this same variable name. It is of course possible to explicitly use Random Variables without the <code class="docutils literal notranslate"><span class="pre">pset</span></code> command by “RV.**variable name” in the input file. However, no random variables will be autopopulated if user chooses this route.</p></li>
</ol>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not place the file in your root, downloads, or desktop folder as when the application runs it will copy the contents on the directories and subdirectories containing this file multiple times (a copy will be made for each sample specified). If you are like us, your root, Downloads or Documents folders contains and awful lot of files and when the backend workflow runs you will slowly find you will run out of disk space!</p>
</div>
<div class="section" id="global-sensitivity-analysis">
<h2>Global Sensitivity Analysis<a class="headerlink" href="#global-sensitivity-analysis" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Problem files</p></td>
<td><p><a class="reference external" href="https://github.com/NHERI-SimCenter/SimCenterDocumentation/tree/master/docs/common/user_manual/examples/desktop/WEUQ/weuq-01//">weuq-01/</a></p></td>
</tr>
</tbody>
</table>
<p>In a global sensitivity analysis the user is wishing to understand what is the influence of the individual random variables on the quantities of interest. This is typically done before the user launches large scale forward uncertainty problems in order to limit the number of random variables used so as to limit the number of simulations performed.</p>
<p>For this problem we will limit the response quantities of interest to the following six quantities. Peak Roof displacement in 1 and 2 directions, root mean square (RMS) accelerations in 1 and 2 directions, Peak BAse shear and moments in 1 and 2 directions. In order to do this we will introduce User defined EPD quantities, which necessitates the following two files: <a class="reference external" href="src/FrameRecorder.tcl">FrameRecorder.tcl</a> and <a class="reference external" href="src/postprocess.tcl">postprocess.tcl</a>.  These files are the same as those presented in <a class="reference internal" href="../weuq-01/README.html#lblwe-example9"><span class="std std-ref">9 Story Building: Sampling Analysis</span></a></p>
<p>To perform a Global Sensitivity  analysis the user would perform the following steps:</p>
<p>The steps involved:</p>
<ol class="arabic simple">
<li><p>Start the application and the UQ Selection will be highlighted. In the panel for the UQ selection, keep the UQ engine as that selected, i.e. Dakota. From the UQ Method Category drop down menu select Sensitivity Analysis, Keeping the method as LHS (Latin Hypercube). Change the #samples to 500 and the seed to 20 as shown in the figure.</p></li>
</ol>
<div class="align-center figure">
<img alt="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-UQ.png" src="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-UQ.png" />
</div>
<ol class="arabic simple" start="2">
<li><p>Next select the <strong>GI</strong> panel. In this panel the building properties and units are set. For this example enter <strong>3</strong> for the number of stories, <strong>468</strong> for building height, <strong>1440</strong> fow building width, and <strong>2160</strong> for building depth.</p></li>
</ol>
<div class="align-center figure">
<img alt="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-GI.png" src="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-GI.png" />
</div>
<ol class="arabic simple" start="3">
<li><p>Next select the <strong>SIM</strong> tab from the input panel. This will default in the MDOF model generator. Using the drop down menu change the generator to the OpenSees option. Specify the path the the story.tcl file, and for the two line edits for centroid nodes and response node enter <strong>1 2 3 4</strong> (which identifies the 4 column nodes as having an id of <strong>1</strong>, <strong>2</strong>, <strong>3</strong>, and <strong>4</strong>. For the spatial dimension enter <strong>3</strong> (3d model) and for number of dof enter <strong>6</strong> as shown in figure:</p></li>
</ol>
<div class="align-center figure">
<img alt="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-SIM.png" src="common/user_manual/examples/desktop/WEUQ/exampleShearBuilding3/figures/3story-SIM.png" />
</div>
<ol class="arabic simple" start="3">
<li><p>Next select the <strong>EVT</strong> panel. From the Load Generator pull down menu select the <strong>Low Rise TPU</strong> option. Leave the exposure condition as <strong>B</strong>. Set the drag coefficient as <strong>1.3</strong> and enter <code class="docutils literal notranslate"><span class="pre">gustWS</span></code> for the 3 sec gust wind speed at the 33 ft height.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-EVENT.png" src="../../../../../../_images/9story-EVENT.png" />
</div>
<ol class="arabic simple" start="3">
<li><p>Next choose the <strong>FEM</strong> panel. Here we will change the entries to use Rayleigh damping, with rayleigh factor chosen using <strong>1</strong> and <strong>6</strong> modes. For the <strong>MDOF</strong> model generator, because it generates a model with two translational and 1 rotational degree-of-freedom in each direction and because we have provided the same <strong>k</strong> values in each translational direction, i.e. we will have duplicate eigenvalues, we specify as shown in the figure modes <strong>1</strong> and <strong>6</strong>.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-FEM.png" src="../../../../../../_images/9story-FEM.png" />
</div>
<ol class="arabic simple" start="4">
<li><p>We will skip the <strong>EDP</strong> panel leaving it in it’s default condition, that being to use the <strong>Standard Wind</strong> EDP generator.</p></li>
<li><p>For the <strong>RV</strong> panel, we will enter the distributions and values for our random variables. Because of the steps we have followed and entries we have made, the panel when we open it should contain the <strong>3</strong> random variables and they should all be set constant. For the w, k and wS random variables we change the distributions to normal and enter the values given for the problem, as shown in figure below.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RV.png" src="../../../../../../_images/9story-RV.png" />
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The user cannot leave any of the distributions for these values as constant for the Dakota UQ engine.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>Next click on the <strong>Run</strong> button. This will cause the backend application to launch Dakota. When done the <strong>RES</strong> tab will be selected and the results will be displayed. The results show the values the mean and standard deviation. The peak displacement of the roof, is the quantity <strong>1-PFD-9-1</strong> (first event (tool to be extended to multiple events), 9th floor (in US ground floor considered 0), and 1 dof direction). the <strong>PFA</strong> quantity defines peak floor acceleration, the <strong>RMSA</strong> quantity the root mean square of floor accelerations, and the <strong>PID</strong> quantity corresponds to peak interstory drift.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RES1.png" src="../../../../../../_images/9story-RES1.png" />
</div>
<p>If the user selects the <strong>Data</strong> tab in the results panel, they will be presented with both a graphical plot and a tabular listing of the data. By left- and right-clicking with the mouse in the individual columns the axis change (left mouse click controls vertical axis, right mouse click the horizontal axis).</p>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RES2.png" src="../../../../../../_images/9story-RES2.png" />
</div>
<p>Various views of the graphical display can be obtained by left and right clicking in the columns of the tabular data. If a singular column of the tabular data is pressed with both right and left buttons a frequency and CDF will be displayed, as shown in figure below.</p>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RES6.png" src="../../../../../../_images/9story-RES6.png" />
</div>
</div>
<div class="section" id="user-defined-output">
<h2>User Defined Output<a class="headerlink" href="#user-defined-output" title="Permalink to this headline">¶</a></h2>
<p>In this section we will demonstrate the use of the user defined output option for the EDP panel. In the previous example we got the standard output, which can be both a lot and also limited (in sense you may not get the information you want). In this example we will present how to obtain results just for the roof displacement, the displacement of node <strong>10</strong> in both the <strong>MDOF</strong> and <strong>OpenSees</strong> model generator examples and shear force at the base of the structure. For the OpenSees model, it is also possible to obtain the overturning moment (something not possible in MDOF model due to fact it is modelled using spring elements). The examples could be extended to output for example the element end rotations, plastic rotations, …</p>
<p>For this example you will need two additional file <a class="reference external" href="https://github.com/NHERI-SimCenter/WE-UQ/blob/master/Examples/9story/recorder.tcl">recorder.tcl</a> and <a class="reference external" href="https://github.com/NHERI-SimCenter/WE-UQ/blob/master/examples/9story/postprocess.tcl">postprocess.tcl</a>.</p>
<p>The recorder script as shown will record the envelope displacements and RMS acceleratiuons in the first two degrees-of-freedom for the nodes in the modes. The script will also record the element forces. The file is as shown below:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">postprocess.tcl</span></code> script shown below will accept as input any of the 10 nodes in the domain and for each of the two dof directions and element forces.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> dispIn <span class="k">[</span><span class="nb">open</span> disp.out r<span class="k">]</span>
<span class="k">while</span> <span class="k">{</span> <span class="k">[</span><span class="nb">gets</span> <span class="nv">$dispIn</span> data<span class="k">]</span> <span class="o">&gt;=</span> <span class="nv">0</span> <span class="k">}</span> <span class="k">{</span>
     <span class="k">set</span> maxDisp <span class="nv">$data</span>
<span class="k">}</span>
<span class="k">set</span> accelIn <span class="k">[</span><span class="nb">open</span> accel.out r<span class="k">]</span>
<span class="k">while</span> <span class="k">{</span> <span class="k">[</span><span class="nb">gets</span> <span class="nv">$accelIn</span> data<span class="k">]</span> <span class="o">&gt;=</span> <span class="nv">0</span> <span class="k">}</span> <span class="k">{</span>
     <span class="k">set</span> maxAccel <span class="nv">$data</span>
<span class="k">}</span>
<span class="k">set</span> forceIn <span class="k">[</span><span class="nb">open</span> forces.out r<span class="k">]</span>
<span class="k">while</span> <span class="k">{</span> <span class="k">[</span><span class="nb">gets</span> <span class="nv">$forceIn</span> data<span class="k">]</span> <span class="o">&gt;=</span> <span class="nv">0</span> <span class="k">}</span> <span class="k">{</span>
     <span class="k">set</span> maxForce <span class="nv">$data</span>
<span class="k">}</span>

<span class="c"># create file handler to write results to output &amp; list into which we will put results</span>
<span class="k">set</span> resultFile <span class="k">[</span><span class="nb">open</span> results.out w<span class="k">]</span>
<span class="k">set</span> results <span class="k">[]</span>

<span class="c"># for each quanity in list of QoI passed</span>
<span class="c"># output data</span>

<span class="k">foreach</span> edp <span class="nv">$listQoI</span> <span class="k">{</span>
    <span class="k">set</span> splitEDP <span class="k">[</span><span class="nb">split</span> <span class="nv">$edp</span> <span class="s2">&quot;_&quot;</span><span class="k">]</span>	
    set response <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$splitEDP</span> <span class="mi">0</span><span class="k">]</span>
    <span class="k">set</span> tag <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$splitEDP</span> <span class="mi">1</span><span class="k">]</span>
    <span class="k">if</span> <span class="k">{[</span><span class="nb">llength</span> <span class="nv">$splitEDP</span><span class="k">]</span> <span class="o">==</span> <span class="nv">2</span><span class="k">}</span> <span class="k">{</span>
	<span class="k">set</span> dof <span class="mi">1</span>
    <span class="k">}</span> <span class="k">else</span> <span class="k">{</span>
	<span class="k">set</span> dof <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$splitEDP</span> <span class="mi">2</span><span class="k">]</span>
    <span class="k">}</span>
    
    <span class="k">if</span> <span class="k">{</span><span class="nv">$response</span> <span class="o">==</span> <span class="s2">&quot;Disp&quot;</span><span class="k">}</span> <span class="k">{</span>
	<span class="k">set</span> nodeDisp <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$maxDisp</span> <span class="k">[expr</span> <span class="k">((</span><span class="nv">$tag-1</span><span class="k">)</span><span class="o">*</span><span class="nv">2</span><span class="k">)</span><span class="o">+</span><span class="nv">$dof-1</span><span class="k">]]</span>
	<span class="nb">lappend</span> results <span class="nv">$nodeDisp</span>
    <span class="k">}</span> <span class="k">elseif</span> <span class="k">{</span><span class="nv">$response</span> <span class="o">==</span> <span class="s2">&quot;RMSA&quot;</span><span class="k">}</span> <span class="k">{</span>
	<span class="k">set</span> nodeAccel <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$maxAccel</span> <span class="k">[expr</span> <span class="k">((</span><span class="nv">$tag-1</span><span class="k">)</span><span class="o">*</span><span class="nv">2</span><span class="k">)</span><span class="o">+</span><span class="nv">$dof-1</span><span class="k">]]</span>
	<span class="nb">lappend</span> results <span class="nv">$nodeAccel</span>
    <span class="k">}</span> <span class="k">elseif</span> <span class="k">{</span><span class="nv">$response</span> <span class="o">==</span> <span class="s2">&quot;Force&quot;</span><span class="k">}</span> <span class="k">{</span>
	<span class="k">set</span> eleForce <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$maxForce</span> <span class="k">[expr</span> <span class="k">((</span><span class="nv">$tag-1</span><span class="k">)</span><span class="o">*</span><span class="nv">6</span><span class="k">)</span><span class="o">+</span><span class="nv">$dof-1</span><span class="k">]]</span>
	<span class="nb">lappend</span> results <span class="nv">$eleForce</span>
    <span class="k">}</span> <span class="k">else</span> <span class="k">{</span>
	<span class="nb">lappend</span> results <span class="mf">0.0</span>
    <span class="k">}</span>
<span class="k">}</span>

<span class="c"># send results to output file &amp; close the file</span>
<span class="nb">puts</span> <span class="nv">$resultFile</span> <span class="nv">$results</span>
<span class="nb">close</span> <span class="nv">$resultFile</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The user has the option when using the OpenSees SIM application to provide no postprocess script (in which case the main script must create a <code class="docutils literal notranslate"><span class="pre">results.out</span></code> file containing a single line with as many space separated numbers as QoI or the user may provide a Python script that also performs the postprocessing. An example of a postprocessing Python script is <a class="reference external" href="https://github.com/NHERI-SimCenter/WE-UQ/blob/master/examples/9story/postprocess.py">postprocess.py</a>. The python script at present only respods to nodal displacements.</p>
</div>
<p>The steps are the same as the previous example, with exception of step 4 defining the <strong>EDP</strong>.</p>
<ol class="arabic simple">
<li><p>For the <strong>EDP</strong> panel, we will change the generator to <strong>User Defined</strong>. In the panel that presents itself the user must provide the paths to both the recorder commands and the postprocessing script. Next the user must provide information on the response parameters they are interested in. The user presses the <strong>Add</strong> button and the enters <code class="docutils literal notranslate"><span class="pre">Disp_10_1</span></code>, <code class="docutils literal notranslate"><span class="pre">RMSA_10_1</span></code>, and <code class="docutils literal notranslate"><span class="pre">Force_1_1</span></code> in the entry field as shown in figure below.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-EDP-USER.png" src="../../../../../../_images/9story-EDP-USER.png" />
</div>
<ol class="arabic simple" start="2">
<li><p>Next click on the <strong>Run</strong> button. This will cause the backend application to launch dakota. When done the <strong>RES</strong> tab will be selected and the results will be displayed. The results show the values the mean and standard deviation as before but now only for the one quantity of interest.</p></li>
</ol>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RES-USER.png" src="../../../../../../_images/9story-RES-USER.png" />
</div>
</div>
<div class="section" id="reliability-analysis">
<h2>Reliability Analysis<a class="headerlink" href="#reliability-analysis" title="Permalink to this headline">¶</a></h2>
<p>If the user is interested in the probability that certain response measure will be exceeded an alternative strategy is to perform a reliability analysis. To perform a reliability analysis the steps above would be repeated with the exception that the user would select a reliability analysis method instead of a Forward Propagation method. To obtain reliability results using the Global Reliability methods presented in Dakota choose the <strong>Global Reliability</strong> methods from the methods drop down menu. In the response levels enter a values of <strong>0.5</strong> and <strong>0.8</strong>, specifying that we are interested in the value of the CDF for a displacement of the roof of 0.5in and 0.8in, i.e. what is probability that displacement will be less than 0.8in.</p>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-UQ-Reliability.png" src="../../../../../../_images/9story-UQ-Reliability.png" />
</div>
<p>After the user fills in the rest of the tabs as per the previous section, the user would then press the <strong>RUN</strong> button. The application (after spinning for a while with the wheel of death) will present the user with the results, which as shown below, indicate that the probabilities as <strong>52%</strong> and <strong>92%</strong>.</p>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-RES-Reliability.png" src="../../../../../../_images/9story-RES-Reliability.png" />
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Reliability analysis can only be performed when there is only one EDP.</p>
<div class="align-center figure">
<img alt="../../../../../../_images/9story-EDP-Reliability.png" src="../../../../../../_images/9story-EDP-Reliability.png" />
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, The Regents of the University of California

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158130480-2', 'auto');
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
</script>


</body>
</html>